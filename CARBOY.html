<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARBOY Generator</title>
    
    <!-- 1. 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. 引入 React 和 ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. 引入 Babel (让浏览器能看懂 JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 字体 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+SC:wght@300;400;500;700&family=Lora:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap');
        
        .font-oswald { font-family: 'Oswald', sans-serif; }
        .font-mono-tech { font-family: 'JetBrains Mono', monospace; }
        .font-sans-cn { font-family: 'Noto Sans SC', sans-serif; }
        .font-serif-narrative { font-family: 'Lora', serif; }

        @keyframes ticket-out {
            0% { transform: translateY(-120%) scale(0.95); opacity: 0; }
            50% { transform: translateY(10px) scale(1.01); opacity: 1; }
            80% { transform: translateY(-5px) scale(1); opacity: 1; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }
        .animate-ticket-out { animation: ticket-out 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards; }

        @keyframes spin-blur {
            0% { filter: blur(0); transform: translateY(-2px); }
            50% { filter: blur(4px); transform: translateY(2px); }
            100% { filter: blur(0); transform: translateY(-2px); }
        }
        .animate-spin { animation: spin-blur 0.1s infinite linear; }

        .bg-paper {
            background-color: #fdfcf8;
            background-image: radial-gradient(#e5e3db 1px, transparent 0);
            background-size: 24px 24px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS (Inline SVGs to avoid dependency issues) ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Copy = (p) => <IconBase {...p}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const Volume2 = (p) => <IconBase {...p}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></IconBase>;
        const VolumeX = (p) => <IconBase {...p}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" x2="17" y1="9" y2="15"/><line x1="17" x2="23" y1="9" y2="15"/></IconBase>;
        const Crown = (p) => <IconBase {...p}><path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></IconBase>;
        const Trash2 = (p) => <IconBase {...p}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconBase>;
        const ArrowDown = (p) => <IconBase {...p}><path d="M12 5v14"/><path d="m19 12-7 7-7-7"/></IconBase>;
        const Terminal = (p) => <IconBase {...p}><polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/></IconBase>;

        // --- DATA ---
        const getRank = (index) => ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'][index % 13];

        const RAW_DATA = {
            scene: [
                { id: 'street', en: 'Urban Street', cn: '繁华都市', short: 'Street' },
                { id: 'highway', en: 'Cyber Highway', cn: '霓虹高速', short: 'Highway' },
                { id: 'track', en: 'Racing Track', cn: '专业赛道', short: 'Track' },
                { id: 'offroad', en: 'Muddy Offroad', cn: '泥泞越野', short: 'Offroad' },
                { id: 'beach', en: 'Sunset Beach', cn: '日落沙滩', short: 'Beach' },
                { id: 'desert', en: 'Scorching Desert', cn: '烈日荒漠', short: 'Desert' },
                { id: 'snow', en: 'Arctic Snow', cn: '极地冰原', short: 'Snow' },
                { id: 'mars', en: 'Mars Colony', cn: '火星基地', short: 'Mars' },
                { id: 'joker_b', en: 'Custom Scene', cn: '自定义场景', short: 'Custom', isJoker: true }, 
            ],
            proportion: [
                { id: 'micro', en: 'Micro City Car', cn: '微型代步车', short: 'Micro' },
                { id: 'hatch', en: 'Hot Hatchback', cn: '高性能两厢', short: 'Hatch' },
                { id: 'sedan', en: 'Luxury Sedan', cn: '豪华轿车', short: 'Sedan' },
                { id: 'suv', en: 'Expedition SUV', cn: '探险SUV', short: 'SUV' },
                { id: 'gt', en: 'Grand Tourer', cn: 'GT跑车', short: 'GT' },
                { id: 'supercar', en: 'Hyper Supercar', cn: '顶级超跑', short: 'Supercar' },
                { id: 'minivan', en: 'Futuristic MPV', cn: '未来MPV', short: 'MPV' },
                { id: 'pickup', en: 'Heavy Duty Pickup', cn: '重型皮卡', short: 'Pickup' },
                { id: 'roadster', en: 'Open-top Roadster', cn: '敞篷跑车', short: 'Roadster' },
                { id: 'wagon', en: 'Shooting Brake', cn: '猎装车', short: 'Wagon' },
                { id: 'lemans', en: 'Le Mans Prototype', cn: '勒芒原型车', short: 'Le Mans' },
                { id: 'formula', en: 'Formula Racer', cn: '方程式', short: 'Formula' },
                { id: 'spaceship', en: 'Hover Vehicle', cn: '反重力飞船', short: 'Hover' },
            ],
            brand: [
                { id: 'porsche', en: 'Porsche', cn: '保时捷', type: 'car' },
                { id: 'bmw', en: 'BMW', cn: '宝马', type: 'car' },
                { id: 'benz', en: 'Mercedes-Benz', cn: '奔驰', type: 'car' },
                { id: 'tesla', en: 'Tesla', cn: '特斯拉', type: 'car' },
                { id: 'ferrari', en: 'Ferrari', cn: '法拉利', type: 'car' },
                { id: 'apple', en: 'Apple', cn: '苹果', type: 'tech' },
                { id: 'nasa', en: 'NASA', cn: 'NASA', type: 'tech' },
                { id: 'dyson', en: 'Dyson', cn: '戴森', type: 'life' },
                { id: 'sony', en: 'Sony', cn: '索尼', type: 'tech' },
                { id: 'nike', en: 'Nike', cn: '耐克', type: 'life' },
                { id: 'braun', en: 'Braun', cn: '博朗', type: 'life' },
                { id: 'lego', en: 'LEGO', cn: '乐高', type: 'toy' },
                { id: 'joker_r', en: 'Custom Brand', cn: '自定义品牌', isJoker: true }, 
            ],
            style: [
                { id: 'min', en: 'Minimalist', cn: '极简主义', short: 'Minimal' },
                { id: 'bauhaus', en: 'Bauhaus', cn: '包豪斯', short: 'Bauhaus' },
                { id: 'cyber', en: 'Cyberpunk', cn: '赛博朋克', short: 'Cyber' },
                { id: 'retro', en: 'Retro-Futurism', cn: '复古未来', short: 'Retro' },
                { id: 'brut', en: 'Brutalist', cn: '粗野主义', short: 'Brutalist' },
                { id: 'org', en: 'Organic Bionic', cn: '有机仿生', short: 'Organic' },
                { id: 'box', en: '8-bit Boxy', cn: '像素盒形', short: 'Boxy' },
                { id: 'aero', en: 'Aerodynamic', cn: '气动流体', short: 'Aero' },
                { id: 'trans', en: 'Transparent', cn: '透明材质', short: 'Glass' },
                { id: 'wood', en: 'Wooden', cn: '原木质感', short: 'Wood' },
                { id: 'sketch', en: 'Sketch Lineart', cn: '手绘线稿', short: 'Sketch' },
                { id: 'clay', en: 'Clay Model', cn: '油泥模型', short: 'Clay' },
            ]
        };

        const processDeck = (list, suit) => {
            return list.map((item, index) => ({
                ...item,
                suit: item.isJoker ? 'JOKER' : suit,
                rank: item.isJoker ? 'JOKER' : getRank(index),
                color: (suit === '♥' || suit === '♦' || (item.isJoker && item.id === 'joker_r')) ? 'text-red-700' : 'text-slate-900'
            }));
        };

        const DECK = {
            scene: processDeck(RAW_DATA.scene, '♠'),
            proportion: processDeck(RAW_DATA.proportion, '♥'),
            brand: processDeck(RAW_DATA.brand, '♣'),
            style: processDeck(RAW_DATA.style, '♦'),
        };

        // --- TEMPLATES ---
        const TEMPLATES = [
            {
                id: 0,
                name: 'Classic Vision',
                renderEn: (b, s, p, sc) => <span>Imagine a <span className="font-bold text-slate-900">{s}</span> <span className="font-bold text-slate-900">{p}</span> designed by <span className="font-bold text-slate-900 border-b-2 border-slate-900/10">{b}</span>, dominating the <span className="font-bold text-red-700">{sc}</span>.</span>,
                renderCn: (b, s, p, sc) => <span>构想一款由 <strong className="font-bold text-slate-700">{b}</strong> 打造的 <strong className="font-bold text-slate-700">{s}</strong> <strong className="font-bold text-slate-700">{p}</strong>，正驰骋于 <strong className="font-bold text-slate-700">{sc}</strong>。</span>
            },
            {
                id: 1,
                name: 'Atmospheric Emergence',
                renderEn: (b, s, p, sc) => <span>In the heart of the <span className="font-bold text-red-700">{sc}</span>, a <span className="font-bold text-slate-900">{b}</span> <span className="font-bold text-slate-900">{p}</span> emerges, embodying pure <span className="font-bold text-slate-900">{s}</span> aesthetics.</span>,
                renderCn: (b, s, p, sc) => <span>在 <strong className="font-bold text-slate-700">{sc}</strong> 深处，一辆 <strong className="font-bold text-slate-700">{b}</strong> <strong className="font-bold text-slate-700">{p}</strong> 破晓而出，完美诠释了 <strong className="font-bold text-slate-700">{s}</strong> 美学。</span>
            },
            {
                id: 2,
                name: 'Future Redefined',
                renderEn: (b, s, p, sc) => <span><span className="font-bold text-slate-900 border-b-2 border-slate-900/10">{b}</span> redefines the future with this <span className="font-bold text-slate-900">{s}</span> <span className="font-bold text-slate-900">{p}</span>, perfectly adapted for the <span className="font-bold text-red-700">{sc}</span>.</span>,
                renderCn: (b, s, p, sc) => <span><strong className="font-bold text-slate-700">{b}</strong> 用这款 <strong className="font-bold text-slate-700">{s}</strong> <strong className="font-bold text-slate-700">{p}</strong> 重塑未来，与 <strong className="font-bold text-slate-700">{sc}</strong> 完美融合。</span>
            },
            {
                id: 3,
                name: 'Silent Power',
                renderEn: (b, s, p, sc) => <span>A vision of <span className="font-bold text-slate-900">{s}</span> elegance: The <span className="font-bold text-slate-900">{b}</span> <span className="font-bold text-slate-900">{p}</span> stands silent yet powerful in the <span className="font-bold text-red-700">{sc}</span>.</span>,
                renderCn: (b, s, p, sc) => <span>一场 <strong className="font-bold text-slate-700">{s}</strong> 的视觉盛宴：这辆 <strong className="font-bold text-slate-700">{b}</strong> <strong className="font-bold text-slate-700">{p}</strong> 静谧而有力地伫立在 <strong className="font-bold text-slate-700">{sc}</strong> 之中。</span>
            },
            {
                id: 4,
                name: 'Engineering Collision',
                renderEn: (b, s, p, sc) => <span>Witness the collision of <span className="font-bold text-slate-900">{b}</span> engineering and <span className="font-bold text-slate-900">{s}</span> design in this <span className="font-bold text-slate-900">{p}</span>, set against the <span className="font-bold text-red-700">{sc}</span>.</span>,
                renderCn: (b, s, p, sc) => <span>见证 <strong className="font-bold text-slate-700">{b}</strong> 工艺与 <strong className="font-bold text-slate-700">{s}</strong> 设计的碰撞：一款置身于 <strong className="font-bold text-slate-700">{sc}</strong> 的 <strong className="font-bold text-slate-700">{p}</strong>。</span>
            }
        ];

        // --- COMPONENTS ---
        const PokerCard = ({ item, spinning, labelEn, labelCn, suitIcon }) => {
            const isJoker = item.suit === 'JOKER';
            return (
                <div className="flex flex-col gap-1 w-full group relative">
                    <div className="flex justify-between items-center px-1 opacity-70">
                        <div className="flex items-baseline gap-1">
                            <span className="text-[10px] font-bold font-oswald uppercase tracking-wider text-slate-600">{labelEn}</span>
                            <span className="text-[9px] font-sans-cn text-slate-400 scale-90 origin-left">{labelCn}</span>
                        </div>
                        <span className={`text-[10px] ${item.color}`}>{suitIcon}</span>
                    </div>
                    <div className={`relative h-28 md:h-32 w-full rounded-xl border-2 flex flex-col items-center justify-center overflow-hidden transition-all duration-200 bg-white ${spinning ? "border-slate-200 bg-slate-50" : isJoker ? "border-amber-400 shadow-[inset_0_0_20px_rgba(251,191,36,0.2)]" : "border-slate-300 shadow-[0_2px_4px_rgba(0,0,0,0.05)]"}`}>
                        {!spinning && (
                            <>
                                <div className={`absolute top-1 left-2 text-sm md:text-base font-oswald font-bold leading-none ${item.color} opacity-30`}>{item.rank}</div>
                                <div className={`absolute bottom-1 right-2 text-sm md:text-base font-oswald font-bold leading-none ${item.color} opacity-30 rotate-180`}>{item.rank}</div>
                            </>
                        )}
                        <div className={`flex flex-col items-center text-center px-1 w-full ${spinning ? 'animate-spin opacity-40' : ''}`}>
                            {isJoker ? (
                                <div className="flex flex-col items-center animate-pulse">
                                    <Crown size={24} className="text-amber-500 mb-1" strokeWidth={2} />
                                    <span className="font-oswald font-bold text-amber-600 text-xs tracking-wide">CUSTOM</span>
                                </div>
                            ) : (
                                <>
                                    <div className={`font-oswald font-bold text-sm md:text-lg uppercase tracking-tight leading-none ${item.color} mb-1 drop-shadow-sm px-2`}>
                                        {item.type === 'car' || item.type === 'tech' || item.type === 'life' || item.type === 'toy' ? item.en : (item.short || item.en)}
                                    </div>
                                    {!spinning && (
                                        <div className="font-sans-cn font-medium text-[9px] text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded-sm mt-0.5 scale-90">
                                            {item.cn.split(' ')[0]}
                                        </div>
                                    )}
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const ReceiptTicket = ({ data, index }) => {
            const [copied, setCopied] = useState(false);
            const template = TEMPLATES[data.templateId] || TEMPLATES[0];
            const promptString = `Automotive design, ${data.style.en} style, ${data.proportion.en} by ${data.brand.en}, set in ${data.scene.en}, cinematic lighting, 8k, highly detailed --ar 16:9 --v 6.0`;

            const handleCopy = () => {
                navigator.clipboard.writeText(promptString);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            return (
                <div className="relative w-full max-w-md bg-white border-x border-b border-slate-200 shadow-lg flex flex-col mx-auto animate-ticket-out transform-gpu" style={{ zIndex: 50 - index, marginTop: index === 0 ? '0' : '20px', marginBottom: '0px' }}>
                    <div className="absolute -top-2 left-0 right-0 h-3 bg-white z-10" style={{ clipPath: 'polygon(0% 100%, 2% 0%, 4% 100%, 6% 0%, 8% 100%, 10% 0%, 12% 100%, 14% 0%, 16% 100%, 18% 0%, 20% 100%, 22% 0%, 24% 100%, 26% 0%, 28% 100%, 30% 0%, 32% 100%, 34% 0%, 36% 100%, 38% 0%, 40% 100%, 42% 0%, 44% 100%, 46% 0%, 48% 100%, 50% 0%, 52% 100%, 54% 0%, 56% 100%, 58% 0%, 60% 100%, 62% 0%, 64% 100%, 66% 0%, 68% 100%, 70% 0%, 72% 100%, 74% 0%, 76% 100%, 78% 0%, 80% 100%, 82% 0%, 84% 100%, 86% 0%, 88% 100%, 90% 0%, 92% 100%, 94% 0%, 96% 100%, 98% 0%, 100% 100%)', background: 'white' }}></div>
                    <div className="p-6 pt-8 flex flex-col gap-5">
                        <div className="flex justify-between items-start border-b border-slate-100 pb-3">
                            <div className="flex flex-col">
                                <span className="font-oswald font-bold text-lg text-slate-900 tracking-tight uppercase">Concept Brief #{data.id}</span>
                                <span className="font-mono-tech text-[10px] text-slate-400 mt-1">{new Date(data.timestamp).toLocaleDateString()} • {new Date(data.timestamp).toLocaleTimeString()}</span>
                            </div>
                            <div className="flex flex-col items-end">
                                <div className="bg-slate-900 text-white px-2 py-1 rounded text-[10px] font-bold font-oswald tracking-widest">CARBOY</div>
                                <span className="text-[8px] font-mono-tech text-slate-300 mt-1">TEMPLATE: {template.name.toUpperCase()}</span>
                            </div>
                        </div>
                        <div className="flex flex-col gap-3">
                            <div className="font-serif-narrative text-xl md:text-2xl leading-tight text-slate-900">{template.renderEn(data.brand.en, data.style.en, data.proportion.en, data.scene.en)}</div>
                            <div className="font-sans-cn font-light text-sm text-slate-500 border-l-2 border-slate-200 pl-3 leading-relaxed">{template.renderCn(data.brand.cn, data.style.cn, data.proportion.cn, data.scene.cn)}</div>
                        </div>
                        <div className="bg-[#f4f4f6] rounded-md p-3 border border-slate-200 relative group">
                            <div className="flex items-center gap-2 text-[10px] text-slate-400 uppercase font-bold font-oswald mb-2 tracking-widest"><Terminal size={10} /> Prompt Command</div>
                            <code className="block font-mono-tech text-[10px] md:text-xs text-slate-700 break-words leading-relaxed">{promptString}</code>
                            <button onClick={handleCopy} className={`absolute top-2 right-2 p-1.5 rounded-md transition-all flex items-center gap-1 ${copied ? 'bg-emerald-100 text-emerald-700' : 'bg-white hover:bg-slate-200 text-slate-500 shadow-sm'}`}>
                                {copied ? <span className="text-[9px] font-bold px-1">COPIED</span> : <Copy size={14} />}
                            </button>
                        </div>
                        <div className="mt-2 flex flex-col items-center opacity-40 gap-1">
                            <div className="h-8 w-full bg-slate-800" style={{ maskImage: 'linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%)', WebkitMaskImage: 'linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%)' }}>
                                <div className="w-full h-full flex justify-between px-4">
                                    {Array.from({length: 50}).map((_, i) => (<div key={i} className="h-full bg-slate-900" style={{width: Math.random() > 0.5 ? '1px' : '3px', opacity: Math.random() + 0.2}} />))}
                                </div>
                            </div>
                            <span className="text-[8px] font-mono-tech uppercase tracking-[0.3em]">Inspiration Ticket End</span>
                        </div>
                    </div>
                </div>
            );
        };

        // --- APP ---
        const App = () => {
            const [hand, setHand] = useState({ scene: DECK.scene[0], proportion: DECK.proportion[0], brand: DECK.brand[0], style: DECK.style[0] });
            const [history, setHistory] = useState([]);
            const [spinning, setSpinning] = useState(false);
            const [leverActive, setLeverActive] = useState(false);
            const [muted, setMuted] = useState(false);
            const scrollRef = useRef(null);

            const getRandom = (deck) => deck[Math.floor(Math.random() * deck.length)];

            const pullLever = () => {
                if (spinning) return;
                setLeverActive(true);
                setTimeout(() => {
                    setSpinning(true);
                    setTimeout(() => setLeverActive(false), 300);
                    setTimeout(() => {
                        const newHand = {
                            scene: getRandom(DECK.scene),
                            proportion: getRandom(DECK.proportion),
                            brand: getRandom(DECK.brand),
                            style: getRandom(DECK.style),
                            timestamp: Date.now(),
                            id: Math.floor(1000 + Math.random() * 9000),
                            templateId: Math.floor(Math.random() * TEMPLATES.length)
                        };
                        setHand(newHand);
                        setSpinning(false);
                        setHistory(prev => [newHand, ...prev]);
                    }, 1000);
                }, 300);
            };

            return (
                <div className="h-screen w-full bg-[#f0eee9] bg-paper flex flex-col font-sans overflow-hidden">
                    <div className="shrink-0 z-40 bg-[#f0eee9] shadow-[0_20px_40px_-10px_rgba(0,0,0,0.1)] border-b border-[#dcd9d2] relative">
                        <div className="w-full max-w-3xl mx-auto px-4 pt-2 pb-4 md:pt-6 md:pb-6 flex items-center gap-2 md:gap-6">
                            <div className="flex-1 bg-[#fdfdfc] rounded-[16px] md:rounded-[24px] border border-[#d4d1c9] p-3 md:p-6 shadow-sm relative">
                                <div className="flex justify-between items-center mb-3 md:mb-4 border-b border-slate-100 pb-2">
                                    <div className="flex items-center gap-2">
                                        <div className="bg-slate-900 text-white text-[10px] md:text-xs px-1.5 py-0.5 md:px-2 md:py-1 rounded font-bold font-oswald tracking-wider">CARBOY</div>
                                        <h1 className="text-[10px] md:text-sm font-bold text-slate-800 font-sans-cn tracking-wide hidden md:block">汽车灵感生成器</h1>
                                    </div>
                                    <div className="flex gap-2">
                                        <button onClick={() => setHistory([])} className="text-slate-300 hover:text-slate-500 transition-colors"><Trash2 size={14} /></button>
                                        <button onClick={() => setMuted(!muted)} className="text-slate-300 hover:text-slate-500 transition-colors">{muted ? <VolumeX size={14} /> : <Volume2 size={14} />}</button>
                                    </div>
                                </div>
                                <div className="grid grid-cols-4 gap-1.5 md:gap-4">
                                    <PokerCard item={hand.scene} spinning={spinning} labelEn="SCENE" labelCn="场景" suitIcon="♠" />
                                    <PokerCard item={hand.proportion} spinning={spinning} labelEn="TYPE" labelCn="车型" suitIcon="♥" />
                                    <PokerCard item={hand.brand} spinning={spinning} labelEn="BRAND" labelCn="品牌" suitIcon="♣" />
                                    <PokerCard item={hand.style} spinning={spinning} labelEn="STYLE" labelCn="风格" suitIcon="♦" />
                                </div>
                                <div className="absolute -bottom-4 left-1/2 -translate-x-1/2 w-48 h-2 bg-[#2a2a2a] rounded-b-xl shadow-inner z-0 hidden md:block" />
                            </div>
                            <div className="relative w-10 md:w-16 h-36 md:h-48 flex flex-col items-center justify-center select-none -mr-2 md:mr-0">
                                <div className="absolute left-[-8px] top-1/2 -translate-y-1/2 w-3 md:w-4 h-20 md:h-24 bg-[#dcd9d2] rounded-r-md border border-[#c8c5be]" />
                                <div className={`relative z-10 w-8 h-8 md:w-10 md:h-10 bg-gradient-to-b from-slate-200 to-slate-300 rounded-full border border-slate-300 shadow-sm transition-transform duration-300 ${leverActive ? 'translate-y-3' : 'translate-y-0'}`} />
                                <div className={`absolute top-1/2 left-1/2 -translate-x-1/2 w-1.5 md:w-2 bg-slate-300 origin-bottom rounded-full transition-all duration-300 ease-in-out ${leverActive ? 'h-20 md:h-24 rotate-[180deg] translate-y-3' : 'h-20 md:h-24 -translate-y-full rotate-0'}`} style={{zIndex: 5}} />
                                <div onClick={pullLever} className={`absolute left-1/2 -translate-x-1/2 z-50 cursor-pointer w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-orange-500 to-red-600 shadow-[0_5px_15px_rgba(0,0,0,0.2)] border-b-2 border-red-800/20 transition-all duration-300 ease-in-out hover:scale-105 active:scale-95 ${leverActive ? 'top-[90%]' : 'top-[-10%] hover:-translate-y-1'} ${spinning ? 'cursor-not-allowed grayscale-[0.5]' : ''}`}>
                                    <div className="absolute top-2 left-2 md:left-3 w-2 h-2 md:w-3 md:h-3 bg-white/30 rounded-full blur-[1px]" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className="flex-1 overflow-y-auto relative bg-[#e5e3db]" ref={scrollRef}>
                        <div className="absolute inset-0 bg-paper opacity-50 pointer-events-none" />
                        <div className="w-full max-w-2xl mx-auto px-4 py-4 md:py-8 flex flex-col items-center min-h-full">
                            {history.length === 0 && (
                                <div className="mt-12 md:mt-20 flex flex-col items-center text-slate-400/50 animate-pulse">
                                    <ArrowDown size={32} className="mb-2" strokeWidth={1.5} />
                                    <p className="font-oswald uppercase tracking-widest text-xs md:text-sm">Pull lever to print ticket</p>
                                    <p className="font-sans-cn text-xs mt-1">下拉摇杆 · 生成简报</p>
                                </div>
                            )}
                            {history.map((ticket, idx) => (
                                <ReceiptTicket key={ticket.timestamp} data={ticket} index={idx} />
                            ))}
                            <div className="h-24" />
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>